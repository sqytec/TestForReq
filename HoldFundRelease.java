package com.wlb.T24.in;
import java.text.SimpleDateFormat;import java.util.Date;
public class HoldFundRelease { public static String inRoutineFormat(String inMsg) {  String retMsg = "";  String holdReasonString = "";  String tellId = inMsg.substring(159, 167);  String termId = inMsg.substring(167, 171);  String reference = inMsg.substring(171, 173);  String accNo = inMsg.substring(173, 184);  String remark = inMsg.substring(231, 281);  String ccy = inMsg.substring(299, 302);  String holdAmt = inMsg.substring(302, 317);  String holdAmtSign = inMsg.substring(317, 318);  String holdFundReleaseDate = inMsg.substring(318, 328);  String holdReasonCode = inMsg.substring(328, 331);  int randInt = (int)(Math.random()*9000+1000);  Date date = new Date();  SimpleDateFormat simpleDateFormat = new SimpleDateFormat(    "yyMMddhhmmsss");  String dateTime = simpleDateFormat.format(date);  String OriMsg = "AC.LOCKED.EVENTS,ACC.HLD.FUND/I/PROCESS/0/,//HK0010108,/I"+dateTime+randInt+",EXT.ITF.CODE:1:1=ITF002.0021.A,EXT.SYSTEM.NAME:1:1=SH,EXT.CHANNEL.ID:1:1=KB,";  switch (Integer.parseInt(holdReasonCode)) {  case 1:   holdReasonString = "HOLD BY BILLS DEPT";   break;  case 2:   holdReasonString = "HOLD BY DEPOSIT DEPT";   break;  case 3:   holdReasonString = "HOLD BY I/P DEPT";   break;  case 5:   holdReasonString = "HOLD BY LOANS DEPT";   break;  case 6:   holdReasonString = "HOLD BY SAFE DEPOSIT BOX DEPT";   break;  case 7:   holdReasonString = "HOLD BY TRUST DEPT";   break;  case 8:   holdReasonString = "HOLD BY WING LUNG SECURITIES";   break;  case 9:   holdReasonString = "HOLD BY TREASURY DEPT";   break;  case 10:   holdReasonString = "HOLD BY SYNDICATED LOANS DEPT";   break;  case 32:   holdReasonString = "HOLD BY CREDIT MANAGEMENT";   break;  case 34:   holdReasonString = "HOLD BY CREDIT CARD CENTRE";   break;  case 41:   holdReasonString = "UT IPO";   break;  case 80:   holdReasonString = "HOLD BY WING LUNG SECURITY LTD";   break;  case 141:   holdReasonString = "HOLD BY WEALTH MANAGEMENT";   break;  case 998:   holdReasonString = "HOLD BY FORWARD VALUE F/D";   break;  }
  retMsg = OriMsg + "EXT.TELLER.ID:1:1=" + tellId + ",EXT.TERM.ID:1:1="    + termId + ",EXT.REFERENCE:1:1=" + dateTime    + ",EXT.TXN.TIME:1:1=" + dateTime + ",T.ACC.NO:1:1=" + accNo    + ",T.CURRENCY:1:1=" + ccy + ",T.HLD.FND.CODE:1:1="    + holdReasonCode + ",T.HLD.REASON:1:1=" +holdReasonString+ ",LOCKED.AMOUNT:1:1="    + holdAmt + ",ACC.T.HOLD.AMT:1:1=" + holdAmt + ",T.TYPE:1:1=1"    + ",";  return retMsg; }
 public static String outRoutineFormat(String outMsg) {  String retoutMsg ="";  String proTpCode = "";  String proCategory = outMsg.substring(outMsg.indexOf("ACCOUNT.CATEGORY:1:1=")+21, outMsg.indexOf(",ACCOUNT.PRODUCT.CODE:1:1="));  String proCode = outMsg.substring(outMsg.indexOf("ACCOUNT.PRODUCT.CODE:1:1=")+25, outMsg.indexOf(",ACCOUNT.CURRENCY:1:1="));  String prodPlan = outMsg.substring(outMsg.indexOf("T.TYPE:1:1=")+11,outMsg.indexOf(",EXT.ITF.CODE:1:1="));  System.out.println("prodPlan:"+prodPlan);  String shortName = "";      return retoutMsg; }
 public static void main(String[] args) {
  String string = "FSHHSHFSH              DAHFQAN2018-05-2511:50:34000000000000300220Y        N079                                                                       0630306010800000000000060220525776                                                                                                                   HKD000000000058304+          0013482955                                ";  /* String inRoutineFormat = inRoutineFormat(string);   System.out.println(inRoutineFormat);
  System.out.println(string.length());  System.out.println(string.indexOf("08"));  System.out.println("tell:" + string.substring(159, 167));  System.out.println("term:" + string.substring(167, 171));  // System.out.println(string.indexOf("60220525776"));  System.out.println("reference:" + string.substring(171, 173));  System.out.println("acc.no:" + string.substring(173, 184));  System.out.println("filter:" + string.substring(184, 231));  System.out.println("remark:" + string.substring(231, 281));  System.out.println("filter:" + string.substring(281, 299));  System.out.println("ccy:" + string.substring(299, 302));  System.out.println("hold amt:" + string.substring(302, 317));  System.out.println("hold amt sign:" + string.substring(317, 318));  System.out.println("hold fund release date:"    + string.substring(318, 328));  System.out.println("hold fund reason:" + string.substring(328, 331));*/   String outMsg = "ACLK1733936205/I18032307190002198/1,ACCOUNT.NUMBER:1:1=60220525776,FROM.DATE:1:1=20171205,LOCKED.AMOUNT:1:1=58304,T.HLD.FND.CODE:1:1=001,T.ACC.NO:1:1=60220525776,T.CURRENCY:1:1=HKD,T.HLD.REASON:1:1=HOLD BY BILLS DEPT,T.TYPE:1:1=1,EXT.ITF.CODE:1:1=ITF002.0021.A,EXT.SYSTEM.NAME:1:1=SH,EXT.CHANNEL.ID:1:1=KB,EXT.TELLER.ID:1:1=08000000,EXT.TERM.ID:1:1=0000,EXT.REFERENCE:1:1=1803230719000,EXT.TXN.TIME:1:1=1803230719000,ACC.T.HOLD.AMT:1:1=000000000058304,CURR.NO:1:1=1,INPUTTER:1:1=10563_INPUTTER__WS___OFS_ITF.ONLINE.OFS,DATE.TIME:1:1=1803231923,AUTHORISER:1:1=10563_INPUTTER_WS____OFS_ITF.ONLINE.OFS,CO.CODE:1:1=HK0010108,DEPT.CODE:1:1=1,INACTIV.MARKER:1:1=,ACCOUNT.CATEGORY:1:1=6001,ACCOUNT.PRODUCT.CODE:1:1=SAV01,ACCOUNT.CURRENCY:1:1=HKD,ACCOUNT.STATUS:1:1=O,LEDGER.BALANCE:1:1=240943.33,AVAILABLE.BALANCE:1:1=124335.33,HOLD.AMOUNT:1:1=116608,FLOAT.AMOUNT:1:1=0,OD.LIMIT:1:1=0,ITF.RETURN.CODE:1:1=E-000000,ITF.RETURN.MSG:1:1=SUCCESS,ITF.REFERENCE:1:1=DFE183451056369792.00";  outRoutineFormat(outMsg);  }}
